<div class="receipt__container">
    <div *ngIf="!emailFormShown">
        <mat-progress-spinner [mode]="'indeterminate'" *ngIf="loading$ | async" class="util--position-absolute"></mat-progress-spinner>
        <div *ngIf="!(loading$ | async)">
            <p class="receipt__title">{{'Receipt.Title' | translate}}</p>
            <button class="button button--black util--full-width" (click)="downloadReport()">{{'Receipt.Download' | translate}}</button>
            <button class="button button--green util--full-width" (click)="showEmailForm()">{{'Receipt.ViaEmail' | translate}}</button>
        </div>
    </div>
    <div *ngIf="emailFormShown">
        <mat-progress-spinner [mode]="'indeterminate'" *ngIf="loading$ | async" class="util--position-absolute"></mat-progress-spinner>
        <div *ngIf="!(loading$ | async)">
            <p class="receipt__title">{{'ReceiptEmail.Title' | translate}}</p>
            <input class="receipt__input util--full-width" type="email" (input)="emailChanged($event)" [ngClass]="{'receipt__input--invalid': invalidEmail}" id="receiptInput">
            <a class="receipt__no-spam-text" [href]="privacyPolicyLink"><p>{{'ReceiptEmail.SpamText' | translate}}</p></a>
            <button class="button button--black util--full-width" (click)="submitEmail()">{{'ReceiptEmail.Send' | translate}}</button>
        </div>
    </div>
</div>
